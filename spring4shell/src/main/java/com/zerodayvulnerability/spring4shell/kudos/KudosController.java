package com.zerodayvulnerability.spring4shell.kudos;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

@Controller
public class KudosController {

	private static final Logger logger = LogManager.getLogger("KudosController");

	@GetMapping("/kudos")
	public String kudosForm(Model model) {
		logger.info("Received Get request for /kudos ");
		model.addAttribute("kudos", new Kudos());
		return "kudos";
	}

	@GetMapping("/")
	public String index() {
		logger.info("Received Get request for Index Page");
		return "index";
	}

	@PostMapping("/kudos")
	public String kudosSubmit(@ModelAttribute Kudos kudos, Model model) {
		logger.info("Received Post request for kudos Form and return to to result Page");
		model.addAttribute("kudos", kudos);
		return "result";
	}

}
